<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.zido.mapper.user.SubscriberUserMapper">

	<!-- 通用查询映射结果 -->
	<resultMap id="BaseResultMap" type="site.zido.entity.SubscriberUser">
		<id column="id" property="id" />
		<result column="phone_number" property="phoneNumber" />
		<result column="id_card_front_url" property="idCardFrontUrl" />
		<result column="id_card_behind_url" property="idCardBehindUrl" />
		<result column="id_card" property="idCard" />
		<result column="real_name" property="realName" />
		<result column="avatar" property="avatar" />
		<result column="ali_pay" property="aliPay" />
		<result column="ali_tm" property="aliTm" />
		<result column="wechat" property="wechat" />
		<result column="taobao_star" property="taobaoStar" />
		<result column="sex" property="sex" />
		<result column="birth_day" property="birthDay" />
		<result column="qq" property="qq" />
		<result column="brushed" property="brushed" />
		<result column="recommand_screen_shot_url" property="recommandScreenShotUrl" />
		<result column="star_screen_shot_url" property="starScreenShotUrl" />
		<result column="ali_pay_screen_shot_url" property="aliPayScreenShotUrl" />
		<result column="user_id" property="userId" />
		<result column="state" property="state" />
		<result column="creat_time" property="creatTime" />
		<result column="nickname" property="nickname" />
		<result column="introduce_id" property="introduceId" />
	</resultMap>

	<resultMap id="SubscriberINFO" type="site.zido.dto.SubscriberUserInfoDTO">

	</resultMap>
	
    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, phoneNumber, IDCardFrontUrl, IDCardBehindUrl, IDCard, realName, avatar, aliPay, aliTM, wechat, taobaoStar, sex, birthDay, Qq, brushed, recommandScreenShotUrl, starScreenShotUrl, aliPayScreenShotUrl, userId,create_time,nickname
    </sql>

	<select id="selectByKey" resultMap="BaseResultMap">
		select user_id,nickname from brush_business_user where state = #{state} and (real_name like '%${key}%' or nickname like '%${key}%')
		order by ((case when real_name like '%${key}%' then 2 else 0 end) + (case when nickname like '%${key}%' then 1 else 0 end))  DESC ,sort DESC limit #{max}
	</select>

	<!--多条件搜索-->
	<select id="searchSubscriberList" resultMap="SubscriberINFO">
		
	</select>


</mapper>
